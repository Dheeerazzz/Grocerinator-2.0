<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Grocerinator</title>
    <style>
    .logo{
    position: absolute;
    left: 50px;
    top: 20px;
}
.img1 {
    position: absolute;
    width: 264px;
    height: 298px;
    left: 700px;
    top: 120px;
}
.name {
    position: absolute;
    width: 461px;
    height: 131px;
    left: 100px;
    top: 11rem;
}
/* Body style */
body {
    font-family: Arial, sans-serif;
    margin: 0;
    padding: 0;
}

/* Logo style */
.logo {
    position: absolute;
    left: 50px;
    top: 20px;
}

/* Image style */
.img1 {
    position: absolute;
    width: 264px;
    height: 298px;
    left: 700px;
    top: 120px;
}

/* Name section style */
.name {
    position: absolute;
    width: 461px;
    height: auto;
    left: 100px;
    top: 200px; /* Adjusted for better alignment */
}

/* Heading style */
h1 {
    font-size: 2.5rem;
    margin-bottom: 10px;
}

/* Paragraph style */
p {
    font-size: 1rem;
    line-height: 1.5;
}

/* Button style */
.scroll-button {
    background-color: #007bff;
    color: #fff;
    border: none;
    padding: 10px 20px;
    font-size: 1rem;
    cursor: pointer;
    border-radius: 5px;
    transition: background-color 0.3s ease;
}

.scroll-button:hover {
    background-color: #0056b3;
}

/* Form section style */
.part1 {
    margin-top: 100px; /* Adjusted for better alignment */
}

/* Label style */
label {
    font-size: 1rem;
    margin-bottom: 5px;
}

/* Input style */
input[type="text"] {
    width: 60%;
    padding: 10px;
    margin-bottom: 10px;
    border: 1px solid #ccc;
    border-radius: 5px;
    box-sizing: border-box;
}

/* Submit button style */
input[type="submit"] {
    background-color: #28a745;
    color: #fff;
    border: none;
    padding: 10px 20px;
    font-size: 1rem;
    cursor: pointer;
    border-radius: 5px;
    transition: background-color 0.3s ease;
}

input[type="submit"]:hover {
    background-color: #218838;
}

/* Center align text */
center {
    text-align: center;
}

/* Error message style */
.error {
    color: red;
    margin-top: 5px;
    font-size: 0.9rem;
}
/* Body Type section style */
h2 {
    font-size: 1.5rem;
    margin-bottom: 10px;
}




label {
    font-size: 1rem;
    margin-right: 15px;
}




/* Container for nutritional values */
.nutritional-values-container {
    display: grid;
    grid-template-columns: repeat(2, 1fr); /* Two columns with equal width */
    gap: 10px; /* Adjust the gap between items */
}

/* Label style */
label {
    display: block;
    font-weight: bold;
    font-size: 20px;
    text-align: left; /* Align the labels to the right */
    width: 200px; /* Set a fixed width for consistent alignment */
    margin-left: 200px;
}


/* Input style */
input[type="text"] {
    width: 80%;
    box-sizing: border-box;
    margin-left: -300px;
}


.body-type-container {
    display: flex;
    justify-content: space-around;
}

.radio-container {
    text-align: center;
}

.body-type-img {
    width: 150px;
    height: 150px;
    object-fit: cover;
    border-radius: 50%;
}
.card-container {
    perspective: 1000px; /* Create 3D effect */
}

.card {
    width: 100%;
    height: 600px;
    position: relative;
    transition: transform 0.6s;
    transform-style: preserve-3d;
}

.front, .back {
    position: absolute;
    width: 100%;
    height: 100%;
    backface-visibility: hidden; /* Hide the back side */
}

.back {
    background-color: #f0f0f0; /* Add background color to back side */
    transform: rotateY(180deg); /* Initially flip to the back side */
}

.flip-button {
    position: absolute;
    bottom: 20px;
    left: 50%;
    transform: translateX(-50%);
    padding: 10px 20px;
}

.card.flipped {
    transform: rotateY(180deg); /* Flip the card when .flipped class is added */
}



    </style>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
    <section class="FirstPage">
    </div> 
    <!-- Logo section -->
    <div class="logo" id="hom"></div>
    <!-- Image section -->
    <span><a href='static/Dashbord.html'>View Profile</a></span>
    <div class="img1">
        <iframe id="myIframe" src="https://giphy.com/embed/tDbPlJFxQZeREMsdnO" width="475" height="468" frameborder="0" class="giphy-embed" allowfullscreen style="margin-left: 300px;"></iframe>
        <p><a href="https://giphy.com/gifs/tDbPlJFxQZeREMsdnO"></a></p>
    </div>
    
    <div class="name">
        <!-- Heading for Grocerinator -->
        <h1 style="font-size: 60px;">Grocerinator.</h1>
        <!-- Some text about Grocerinator -->
        <p>Grocerinator is your ultimate destination for nutrition information and remedies for nutrition deficiencies. We strive to empower you to make informed choices about your diet and lifestyle.</p>
        <button class="scroll-button" onclick="scrollPage()">Get Started</button>

    </div>
</section>

<center>
<section style="margin-top: 700px;">
    <section class="part1" style="padding-bottom: 400px;">
    <h1 style="margin-top: 100px;">User Details</h1>
    <form action="/submit" method="post">
        <Section style="padding-left: 250px;">
        <label for="height" style="margin-left: 30px;">Height (in cm):</label>
        <input type="text" class="form-control rounded-pill" id="height" name="height" style="border-radius: 10px;"><br>

        <label for="weight" style="margin-left: 30px;">Weight (in kg):</label>
        <input type="text" class="form-control rounded-pill" id="weight" name="weight" style="border-radius: 10px;"><br>
    </Section>
    <section style="margin-left: 300px;">
        <p style="margin-right: 750px;">Diseases:</p>
<div class="diseases-container">
    <input type="checkbox" id="diabetes" name="diseases" value="Diabetes">
    <label for="diabetes">Type-2 Diabetes</label>

    <input type="checkbox" id="bp" name="diseases" value="Blood Pressure">
    <label for="bp">Blood Pressure</label>

    <input type="checkbox" id="cholesterol" name="diseases" value="Cholesterol">
    <label for="cholesterol">Cholesterol</label>

</div>

</section>

    </section>
    
    <div class="card-container">
        <div class="card">
            <div class="front">
                <h2 style="padding-bottom: 50px; font-size: 30px;">Nutritional Values</h2>
                <div class="nutritional-values-container">
                    <label for="fat">Fat:</label>
                    <input type="text" id="fat" name="fat">
    
                    <label for="fiber">Fiber:</label>
                    <input type="text" id="fiber" name="fiber">
    
                    <label for="carbs">Carbohydrates:</label>
                    <input type="text" id="carbs" name="carbs">
    
                    <label for="energy">Energy:</label>
                    <input type="text" id="energy" name="energy">
    
                    <label for="proteins">Proteins:</label>
                    <input type="text" id="proteins" name="proteins">
    
                    <label for="salts">Salts:</label>
                    <input type="text" id="salts" name="salts">
    
                    <label for="sugars">Sugars:</label>
                    <input type="text" id="sugars" name="sugars">
                </div>
                

            </div>
            <div class="back">
                
                    <div id="webcam-feed"></div>
                    <button id="capture-button">Capture</button>
                </div>
                
           
            <button class="flip-button" class="scroll-button" onclick="flipCard(event)">Flip</button>
        </div>
        {% if ocr_result %}
    <h2>OCR Result: {{ ocr_result }}</h2>
{% endif %}
    </div>
    
    
    <section style="margin-top: 300px; padding-bottom: 400px;">
        <h2 style="font-size: 40px; padding-bottom: 100px;">Body Type</h2>
        <div class="body-type-container">
            <div class="radio-container">
                <input type="radio" id="skinny" name="body_type" value="skinny">
                <label for="skinny">
                    <img src="{{ url_for('static', filename='images/slim.jpg') }}"" alt="Skinny" class="body-type-img"><br>
                    <span>Skinny</span>
                </label>
            </div>
    
            <div class="radio-container">
                <input type="radio" id="fit" name="body_type" value="fit">
                <label for="fit">
                    <img src="{{ url_for('static', filename='images/fit.jpg') }}" alt="Fit" class="body-type-img"><br>
                    <span>Fit</span>
                </label>
            </div>
    
            <div class="radio-container">
                <input type="radio" id="obese" name="body_type" value="obese">
                <label for="obese">
                    <img src="{{ url_for('static', filename='images/fat.jpg') }}" alt="Fat Image" class="body-type-img"><br>
                    <span>Obese</span>
                </label>
            </div>
        </div>
    </section>
    
        
    </section>
    <section style="margin-top: -200px;">
    <input type="submit" name="/submit">
</section>
    </form>
</section>
</center>
{{ scroll_script | safe }}
<center style="margin-top: 320px;padding-bottom: 320px;">
    
    {% if safety_score is defined %}
    <h2><span style="font-weight: lighter;">The predicted safety score for the product is :</span> {{ safety_score[0] }}</h2>
{% endif %}
{% if new is defined %}
    <h2>
        {% for value in new %}
            {{ value }} <br>
        {% endfor %}
    </h2>
{% endif %}


</center>
<script>
function scrollPage() {
    window.scrollBy({
        top: 600,
        behavior: 'smooth'
    });
}</script>
    <script>
        function scrollToResults() {
            // Scroll the page down by 200 pixels
            window.scrollBy({
                top: 200,
                behavior: 'smooth'
            });
        }
    </script>
    <script>
    function flipCard(event) {
    // Prevent the default form submission behavior
    event.preventDefault();

    var card = document.querySelector('.card');
    card.classList.toggle('flipped');
}


    </script>
    <script>
            // Get the webcam-feed and capture-button elements
const webcamFeed = document.getElementById('webcam-feed');
const captureButton = document.getElementById('capture-button');
let stream = null; // Variable to store the video stream

// Function to start the webcam and display the feed
async function startWebcam() {
    try {
        stream = await navigator.mediaDevices.getUserMedia({ video: true });
        webcamFeed.innerHTML = `<video id="video-element" autoplay></video>`;
        const videoElement = document.getElementById('video-element');
        videoElement.srcObject = stream;

        // Resize video to match card dimensions
        const card = document.querySelector('.card');
        videoElement.addEventListener('loadedmetadata', () => {
            const cardWidth = card.clientWidth;
            const cardHeight = card.clientHeight;
            const aspectRatio = videoElement.videoWidth / videoElement.videoHeight;

            if (cardWidth / aspectRatio < cardHeight) {
                videoElement.width = cardWidth;
                videoElement.height = cardWidth / aspectRatio;
            } else {
                videoElement.height = cardHeight;
                videoElement.width = cardHeight * aspectRatio;
            }
        });
    } catch (error) {
        console.error('Error accessing webcam:', error);
    }
}

// Function to stop the webcam
function stopWebcam() {
    if (stream) {
        const tracks = stream.getTracks();
        tracks.forEach(track => track.stop());
        stream = null;
    }
}

// Function to capture an image from the webcam feed
function captureImage() {
    const videoElement = document.getElementById('video-element');
    const canvas = document.createElement('canvas');
    canvas.width = videoElement.videoWidth;
    canvas.height = videoElement.videoHeight;
    canvas.getContext('2d').drawImage(videoElement, 0, 0, canvas.width, canvas.height);
    const imageDataURL = canvas.toDataURL('image/png');
    console.log('Captured image:', imageDataURL);
}

// Add event listener to start the webcam on button click
captureButton.addEventListener('click', () => {
    startWebcam();
});

// Trigger the startWebcam function when the card is flipped to the back side
document.querySelector('.card').addEventListener('click', (event) => {
    const card = event.currentTarget;
    if (card.classList.contains('flipped')) {
        startWebcam();
    } else {
        stopWebcam(); // Stop the webcam when flipping back to the form
    }
});


    </script>
    <script>
        // Get the capture-button element
const captureButton = document.getElementById('capture-button');

// Prevent form submission when Capture button is clicked
captureButton.addEventListener('click', (event) => {
    event.preventDefault(); // Prevent default form submission behavior
    event.stopPropagation(); // Stop event propagation to parent elements
    captureImage(); // Call the captureImage function
});

    </script>

</body>
</html>
